---
import { SITE_LINKS } from "@/constants.ts";
import type { Link } from "@/types";
import { getAbsoluteLocaleUrl, getRelativeLocaleUrl } from "astro:i18n";
import { useTranslation, type AvailableLocales } from "i18n";
import LanguageSelect from "./LanguageSelect.astro";

const { HOME, BRIEF, DOCUMENTS, COVID_19, NEWS, ABOUT, FLAGSHIP } = SITE_LINKS;

const currentLocale = Astro.currentLocale as AvailableLocales;

const t = useTranslation(currentLocale);

const links: Array<Link> = [
  { title: t("link.home"), href: getRelativeLocaleUrl(currentLocale, HOME) },
  {
    title: t("link.who-we-are"),
    href: getRelativeLocaleUrl(currentLocale, ABOUT),
  },

  {
    title: t("link.in-brief"),
    href: getRelativeLocaleUrl(currentLocale, BRIEF),
  },

  {
    title: t("link.documentation"),
    href: getRelativeLocaleUrl(currentLocale, DOCUMENTS),
  },
  {
    title: t("link.covid-19"),
    href: getRelativeLocaleUrl(currentLocale, COVID_19),
  },

  {
    title: t("link.flagship-initiatives"),
    href: getAbsoluteLocaleUrl(currentLocale, FLAGSHIP),
  },
  {
    title: t("link.newsroom"),
    href: getRelativeLocaleUrl(currentLocale, NEWS),
  },
];
---

<div class="grid h-full auto-rows-min gap-4 overflow-auto p-4">
  <label
    for="drawer"
    class="size-8 cursor-pointer justify-self-end"
    aria-label="close navigation"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="h-full w-full"
      ><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg
    >
  </label>
  <nav>
    <ul class="space-y-2 text-lg">
      {
        links.map((i) => (
          <li>
            <a
              data-astro-reload
              href={i.href}
              set:text={i.title}
              class="block rounded-lg p-2 transition hover:ring hover:ring-main"
            />
          </li>
        ))
      }
    </ul>
  </nav>
</div>
